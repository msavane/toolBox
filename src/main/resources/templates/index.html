<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agri E-commerce</title>
    <link rel="stylesheet" th:href="@{/styles.css}">
    <script src="https://cdn.tailwindcss.com"></script> <!-- Include Tailwind -->
</head>

<body class="min-h-screen bg-gradient-to-b from-yellow-400 to-purple-600 p-8 flex flex-col items-center">

<!-- Header -->
<div class="flabola-container">
    <h3 class="text-white font-bold">Flabâœªla WHOLESALE</h3>
</div>

<h1 class="text-4xl font-bold text-center text-white mb-6">Agri E-commerce</h1>

<!-- Add Product Button -->
<div class="text-center mb-6">
    <a th:href="@{/add-product}" class="bg-purple-700 text-white font-bold px-6 py-3 rounded-lg shadow-lg hover:bg-purple-800 transition">
        Add a Product
    </a>
</div>

<!-- Loading/Error Messages -->
<p class="text-center text-white" th:if="${loading != null and loading}">Loading products...</p>
<p class="text-center text-red-500" th:if="${error}" th:text="${error}"></p>

<!-- Products Table -->
<div class="w-full max-w-5xl bg-white shadow-xl rounded-2xl p-6 overflow-x-auto">
    <table class="w-full border-collapse">
        <thead>
        <tr class="bg-purple-700 text-white">
            <th class="p-3 text-left">Product Name</th>
            <th class="p-3 text-left">Description</th>
            <th class="p-3 text-left">Price</th>
            <th class="p-3 text-left">Stock</th>
            <th class="p-3 text-center">Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="product : ${products}" class="border-b hover:bg-gray-100 transition">
            <td class="p-3 font-semibold text-purple-700" th:text="${product.name}"></td>
            <td class="p-3 text-gray-600" th:text="${product.description}"></td>
            <td class="p-3 text-yellow-500 font-bold text-lg" th:text="'$' + ${#numbers.formatDecimal(product.price, 1, 2)}"></td>
            <td class="p-3 text-gray-600 font-semibold" th:text="${product.stock}"></td>
            <td class="p-3 flex justify-center">
                <!-- Add to Cart Form -->
                <form th:action="@{/add-to-cart}" method="post">
                    <input type="hidden" name="productId" th:value="${product.id}" />
                    <button type="submit" class="bg-purple-700 text-white font-bold px-4 py-2 rounded-lg shadow-md hover:bg-purple-800 transition">
                        Add to Cart
                    </button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!-- Pagination -->
<div class="mt-6 flex justify-center gap-3">
    <a th:href="@{/products?page=1}" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg shadow-md hover:bg-gray-400 transition" th:if="${currentPage > 1}">
        Previous
    </a>

    <span class="px-4 py-2 bg-purple-700 text-white rounded-lg shadow-md" th:text="'Page ' + ${currentPage}"></span>

    <a th:href="@{/products?page={next}(next=${currentPage + 1})}" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-lg shadow-md hover:bg-gray-400 transition" th:if="${hasNextPage}">
        Next
    </a>
</div>

</body>
</html>
